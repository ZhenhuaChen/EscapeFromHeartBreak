<!--tasks.wxml-->
<navigation-bar title="ä»»åŠ¡æ‰“å¡" background="linear-gradient(90deg, #ffc0e0 0%, #ffe5f0 100%)" color="#333" back="{{false}}"></navigation-bar>

<view class="container">
  <view class="header">
    <view class="title">ä»Šæ—¥ä»»åŠ¡</view>
    <view class="date">{{todayDate}}</view>
  </view>

  <view class="daily-task-card">
    <view class="task-header">
      <text class="task-day">Day {{detoxDays}}</text>
      <text class="task-status {{todayTaskCompleted ? 'completed' : ''}}">
        {{todayTaskCompleted ? 'å…¨éƒ¨å®Œæˆ' : 'è¿›è¡Œä¸­'}}
      </text>
    </view>
    <view class="task-content">
      <view class="task-title">{{todayTask.title}}</view>
      <view class="task-desc">{{todayTask.desc}}</view>
    </view>
    <view class="task-hint">
      <text>ğŸ‘‡ ç‚¹å‡»ä¸‹æ–¹ä»»åŠ¡åˆ—è¡¨ä¸­çš„ä»»åŠ¡å®Œæˆæ‰“å¡</text>
    </view>
    <view wx:if="{{todayTaskCompleted}}" class="completed-time">
      å®Œæˆæ—¶é—´ï¼š{{completedTimeStr}}
    </view>
  </view>

  <view class="all-tasks-section">
    <view class="section-title">æ‰€æœ‰ä»»åŠ¡</view>
    <view class="tasks-list">
      <view
        wx:for="{{tasksList}}"
        wx:key="id"
        class="task-item {{item.completed ? 'completed' : ''}} {{item.day === detoxDays ? 'current' : ''}}"
        bindtap="handleTaskTap"
        data-task-id="{{item.id}}"
      >
        <view class="task-info">
          <view class="task-name">Day {{item.day}} - {{item.title}}</view>
          <view class="task-description">{{item.desc}}</view>
        </view>
        <view class="task-check">
          <text wx:if="{{item.completed}}" class="check-icon">âœ“</text>
          <text wx:elif="{{item.day === detoxDays}}" class="check-icon pending">â—‹</text>
        </view>
      </view>
    </view>
  </view>
</view>

<!-- é¼“åŠ±å¼¹çª— -->
<view wx:if="{{showEncouragement}}" class="encouragement-modal" bindtap="closeEncouragement">
  <view class="encouragement-content" catchtap="stopPropagation">
    <view class="encouragement-icon">ğŸ‰</view>
    <view class="encouragement-title">ä»»åŠ¡å®Œæˆï¼</view>
    <view class="encouragement-message">{{encouragementMessage}}</view>
    <button class="encouragement-btn" bindtap="closeEncouragement">ç»§ç»­åŠ æ²¹</button>
  </view>
</view>
