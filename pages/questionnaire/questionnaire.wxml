<!--questionnaire.wxml-->
<view class="container">
  <!-- 顶部进度条 -->
  <view class="progress-bar">
    <view class="progress-fill" style="width: {{progress}}%"></view>
  </view>

  <!-- 用户信息收集 (step 0) -->
  <view wx:if="{{currentIndex === -1}}" class="userinfo-wrapper">
    <view class="question-number">第一步</view>
    <view class="question-title">先认识一下</view>

    <view class="form">
      <view class="form-item">
        <view class="label">怎么称呼你？</view>
        <input
          class="input"
          placeholder="输入你的昵称"
          value="{{nickname}}"
          bindinput="handleNicknameInput"
          maxlength="20"
        />
      </view>

      <view class="form-item">
        <view class="label">你的年龄</view>
        <input
          class="input"
          type="number"
          placeholder="输入你的年龄"
          value="{{age}}"
          bindinput="handleAgeInput"
          maxlength="3"
        />
      </view>
    </view>

    <button
      class="next-btn {{canSubmit ? '' : 'disabled'}}"
      bindtap="handleUserInfoNext"
      disabled="{{!canSubmit}}"
    >
      下一步
    </button>
  </view>

  <!-- 问题区域 (step 1-10) -->
  <view wx:else class="question-wrapper">
    <view class="question-number">问题 #{{currentIndex + 1}}</view>
    <view class="question-title">{{currentQuestion.title}}</view>

    <!-- 选项列表 -->
    <view class="options-list">
      <view
        wx:for="{{currentQuestion.options}}"
        wx:key="value"
        class="option-item"
        bindtap="handleSelectOption"
        data-value="{{item.value}}"
      >
        <view class="option-number">{{index + 1}}</view>
        <view class="option-text">{{item.label}}</view>
      </view>
    </view>
  </view>
</view>
